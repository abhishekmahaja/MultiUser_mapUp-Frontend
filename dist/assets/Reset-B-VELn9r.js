import{r as s,j as t}from"./react-BEjMjN8G.js";import{L as F}from"./react-router-dom-CdDO6LQr.js";import{P as V,r as O,g as T,h as D,i as E}from"./index-Cu_Ucmoy.js";import{a as N,u as R}from"./react-redux-BCzlrtQJ.js";import{B as o}from"./react-toastify-jL36amYw.js";import{a as W}from"./react-router-DNCBPsEY.js";import{G as i,B as p,T as h,k as u,I as x,m as f,V as g,n as w,b as L}from"./@mui-Cxlh-61e.js";import"./@babel-BE2LeGo5.js";import"./react-dom-UOU5xRcb.js";import"./scheduler-CzFDRTuY.js";import"./@remix-run-BOUEh3jQ.js";import"./react-otp-input-CPsintEO.js";import"./axios-DzWr6d29.js";import"./@reduxjs-DYPsSoVN.js";import"./redux-DITMfSWq.js";import"./immer-DqxjFn0G.js";import"./redux-thunk-ClJT1hhx.js";import"./redux-persist-CW-G7xl2.js";import"./clsx-B-dksMZM.js";import"./@emotion-DFtIIxQb.js";import"./hoist-non-react-statics-DQogQWOa.js";import"./stylis-FDnFs_-n.js";import"./react-is-DcfIKM1A.js";import"./react-transition-group-CMj4CyiH.js";import"./use-sync-external-store-CL43r71C.js";const G="/assets/account1.png";function ut(){const[n,j]=s.useState(""),[a,P]=s.useState(""),[d,y]=s.useState(""),[l,b]=s.useState(!1),[c,C]=s.useState(!1),m=N(),v=W(),{email:A}=R(e=>e.forgotAuth),S=async e=>{if(e.preventDefault(),a!==d){o.error("Passwords do not match!");return}const B={email:A,newPassword:a,confirmPassword:d,otp:n};try{const r=await O(B);r.success?(m(T(n)),m(D(!0)),o.success("Password reset successful! Please log in."),v("/"),m(E())):o.error(r.message||"OTP does not match")}catch(r){console.error(r),o.error("Password reset failed")}},I=()=>b(!l),k=()=>C(!c);return t.jsx(V,{showheader:!0,showfooter:!0,bgcolor:"#646d90",display:"flex",justifyContent:"center",alignItems:"center",className:"bgImg",children:t.jsx(i,{container:!0,style:{backgroundColor:"white"},lg:4,md:4,sm:6,xs:12,p:"5%",children:t.jsxs("form",{onSubmit:S,style:{borderRadius:"20px",border:"1px solid #ddd",padding:"2%"},children:[t.jsx(p,{sx:{display:"flex",justifyContent:"center"},children:t.jsxs(i,{item:!0,children:[t.jsx(i,{item:!0,textAlign:"center",children:t.jsx("img",{src:G,style:{width:"100px"},alt:"Account"})}),t.jsx(i,{item:!0,sx:{textAlign:"center",pb:1},children:t.jsx(h,{variant:"h4",children:"Reset Password"})})]})}),t.jsxs(p,{sx:{"& .MuiTextField-root":{my:1}},children:[t.jsx(u,{label:"Enter Verification Code",variant:"outlined",value:n,onChange:e=>j(e.target.value),fullWidth:!0}),t.jsx(u,{label:"New Password",variant:"outlined",type:l?"text":"password",value:a,onChange:e=>P(e.target.value),fullWidth:!0,InputProps:{endAdornment:t.jsx(x,{position:"end",children:t.jsx(f,{onClick:I,edge:"end",children:l?t.jsx(g,{}):t.jsx(w,{})})})}}),t.jsx(u,{label:"Confirm Password",variant:"outlined",type:c?"text":"password",value:d,onChange:e=>y(e.target.value),fullWidth:!0,InputProps:{endAdornment:t.jsx(x,{position:"end",children:t.jsx(f,{onClick:k,edge:"end",children:c?t.jsx(g,{}):t.jsx(w,{})})})}}),t.jsx(L,{variant:"contained",sx:{mt:2},fullWidth:!0,color:"primary",type:"submit",children:"Change Password"}),t.jsx(h,{textAlign:"center",pt:2,children:t.jsx(F,{to:"/",style:{textDecoration:"none"},children:"Back to Login"})})]})]})})})}export{ut as default};
